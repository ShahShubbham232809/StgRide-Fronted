<div class="mainbtn">
  <button type="button" class="btn btn-primary" (click)="Show()">
    Add Vehicle Price
  </button>
</div>
<div class="main col-6 globebox card" *ngIf="value">
  <form [formGroup]="createCarPrice">
    <div
      class="field mt-3 text-center"
      *ngIf="createCarPrice.get('countryid')?.invalid && (createCarPrice.get('countryid')?.dirty || createCarPrice.get('countryid')?.touched)"
    >
      <span
        *ngIf="createCarPrice.get('countryid')?.hasError('incorrect')"
        style="color: red;"
        >Don't Match This Three Fields...</span
      >
      <!-- <span *ngIf="createcity.get('cityname')?.hasError('incorrect')">CarType is already exists</span> -->
    </div>
    <div class="center">
      <div class="field is-horizontal">
        <div class="field-label is-normal">
          <label class="label">Country</label>
        </div>
        <div class="field-body">
          <div class="field">
            <p class="control has-icons-left">
              <span class="select">
                <select
                  (change)="selectedCountry($event)"
                  formControlName="countryid"
                >
                  <option
                    *ngFor="let country of countryList"
                    [value]="country.countryname"
                    class="bg-light"
                    [attr.country-id]="country._id"
                  >
                    {{country.countryname | titlecase}}</option
                  >
                </select>
              </span>
              <span class="icon is-small is-left">
                <i class="fas fa-globe"></i>
              </span>
            </p>
          </div>
        </div>
      </div>
    </div>
    <div
      class="field mt-3 text-center"
      *ngIf="createCarPrice.get('countryid')?.invalid && (createCarPrice.get('countryid')?.dirty || createCarPrice.get('countryid')?.touched)"
    >
      <span
        *ngIf="createCarPrice.get('countryid')?.hasError('required')"
        style="color: red;"
        >Please Select Country...</span
      >
      <!-- <span *ngIf="createcity.get('cityname')?.hasError('incorrect')">CarType is already exists</span> -->
    </div>
    <div class="center">
      <div class="field is-horizontal">
        <div class="field-label is-normal">
          <label class="label">City</label>
        </div>
        <div class="field-body">
          <div class="field">
            <p class="control has-icons-left">
              <span class="select">
                <select
                  formControlName="cityid"
                  (change)="carid($event)"
                  class="city"
                >
                  <option value="" selected disabled>Select City</option>
                  <option
                    *ngFor="let city of cityList"
                    [value]="city.cityname"
                    [attr.data-id]="city._id"
                    class="bg-light"
                  >
                    {{city.cityname | titlecase}}</option
                  >
                </select>
              </span>
              <span class="icon is-small is-left">
                <i class="fas fa-flag"></i>
              </span>
            </p>
          </div>
        </div>
      </div>
    </div>
    <div class="field mt-3 text-center">
      <span *ngIf="cityerror" style="color: red;">
        No Found City...
      </span>
    </div>
    <div
      class="field mt-3 text-center"
      *ngIf="createCarPrice.get('cityid')?.invalid && (createCarPrice.get('cityid')?.dirty || createCarPrice.get('cityid')?.touched)"
    >
      <span
        *ngIf="createCarPrice.get('cityid')?.hasError('required')"
        style="color: red;"
        >Please Select City...</span
      >

      <!-- <span *ngIf="createCarPrice.get('city')?.hasError('incorrect')" style="color: red;">No Found City...</span> -->
      <!-- <span *ngIf="createcity.get('cityname')?.hasError('incorrect')">CarType is already exists</span> -->
    </div>
    <div class="center">
      <div class="field is-horizontal">
        <div class="field-label is-normal">
          <label class="label">Type</label>
        </div>
        <div class="field-body">
          <div class="field">
            <p class="control has-icons-left">
              <span class="select">
                <select formControlName="typeid" (change)="cartypeid($event)">
                  <option
                    *ngFor="let car of carTypeList"
                    [value]="car.cartype"
                    class="bg-light"
                    [attr.type-id]="car._id"
                  >
                    {{car.cartype | uppercase}}</option
                  >
                </select>
              </span>
              <span class="icon is-small is-left">
                <i class="fas fa-car"></i>
              </span>
            </p>
          </div>
        </div>
      </div>
    </div>
    <div
      class="field mt-3 text-center"
      *ngIf="createCarPrice.get('typeid')?.invalid && (createCarPrice.get('typeid')?.dirty || createCarPrice.get('typeid')?.touched)"
    >
      <span
        *ngIf="createCarPrice.get('typeid')?.hasError('required')"
        style="color: red;"
        >Please Select Vehicle Type...</span
      >
      <!-- <span *ngIf="createcity.get('cityname')?.hasError('incorrect')">CarType is already exists</span> -->
    </div>
    <div class="center">
      <div class="field is-horizontal">
        <div class="field-label is-normal">
          <!-- <span tooltip="I'm up above it!" class="my-2 mx-1">  <i class="fas fa-info"></i></span> -->
          <label class="label"
            >Driver's Profit
            <span
              tooltip="The driver profit is the amount of money that a driver earns from their gross earnings"
              style="background-color: black; border-radius: 10px;"
            >
              <i
                class="fas fa-info my-1 mx-1"
                style="color: white; font-size: 10px;"
              ></i></span
          ></label>
        </div>
        <div class="field-body">
          <div class="field">
            <p class="control is-expanded has-icons-left has-icons-right">
              <input
                class="input is-success no-spin"
                type="tel"
                placeholder="Driver Profit"
                formControlName="DriverProfit"
                oninput="this.value = this.value.replace(/[^0-9]/g, '');"
                maxlength="3"
              />

              <!-- onkeypress="return event.charCode >= 48" -->
              <span class="icon is-small is-left">
                <i class="fas fa-wallet"></i>
              </span>
              <span class="icon is-small is-right">
                <i class="fas fa-dollar-sign"></i>
              </span>
            </p>
          </div>
        </div>
      </div>
    </div>

    <div
      class="field mt-3 text-center"
      *ngIf="createCarPrice.get('DriverProfit')?.invalid && (createCarPrice.get('DriverProfit')?.dirty || createCarPrice.get('DriverProfit')?.touched)"
    >
      <span
        *ngIf="createCarPrice.get('DriverProfit')?.hasError('required')"
        style="color: red;"
        >Please Select DriverProfit...</span
      >
      <!-- <span *ngIf="createcity.get('cityname')?.hasError('incorrect')">CarType is already exists</span> -->
    </div>

    <div class="center">
      <div class="field is-horizontal">
        <div class="field-label is-normal">
          <label class="label"
            >Min.Fare <span
              tooltip="The minimum fare for an ride is used to ensure that drivers receive a reasonable payment for their time
              and effort. In some cases, the minimum fare may also be used to discourage riders from taking short trips that are not cost-
              effective for drivers. This helps to ensure that drivers are compensated fairly for their time and effort and helps to
              encourage them to accept more rides."
              style="background-color: black; border-radius: 10px;"
            >
              <i
                class="fas fa-info my-1 mx-1"
                style="color: white; font-size: 10px;"
              ></i></span
          ></label>
        </div>
        <div class="field-body">
          <div class="field">
            <p class="control is-expanded has-icons-left has-icons-right">
              <input
                class="input is-success no-spin"
                type="tel"
                step="0.01"
                placeholder="Min. Fare"
                formControlName="MinFarePrice"
                oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1')"
                maxlength="4"
              />
              <span class="icon is-small is-left">
                <i class="fas fa-wallet"></i>
              </span>
              <span class="icon is-small is-right">
                <i class="fas fa-dollar-sign"></i>
              </span>
            </p>
          </div>
        </div>
      </div>
    </div>
    <div
      class="field mt-3 text-center"
      *ngIf="createCarPrice.get('MinFarePrice')?.invalid && (createCarPrice.get('MinFarePrice')?.dirty || createCarPrice.get('MinFarePrice')?.touched)"
    >
      <span
        *ngIf="createCarPrice.get('MinFarePrice')?.hasError('required')"
        style="color: red;"
        >Please Select MinFarePrice...</span
      >
      <!-- <span *ngIf="createcity.get('cityname')?.hasError('incorrect')">CarType is already exists</span> -->
    </div>
    <div class="center">
      <div class="field is-horizontal">
        <div class="field-label is-normal">
          <label class="label">Distance For Base Price <span
            tooltip="The base price distance is a predetermined distance that user can travel with base price. For example if
            admin set base price 2 and base distance 5 km for starting 5 km or less than that, it will cost you $2"
            style="background-color: black; border-radius: 10px;"

          >
            <i
              class="fas fa-info my-1 mx-1"
              style="color: white; font-size: 10px;"
            ></i></span
        ></label>
        </div>
        <div class="field-body">
          <div class="field">
            <p class="control has-icons-left">
              <span class="select">
                <select formControlName="BasePriceDistance">
                  <option selected>1</option>
                  <option selected>2</option>
                  <option selected>3</option>
                  <option selected>4</option>
                  <option selected>5</option>
                  <option selected>6</option>
                  <option selected>7</option>
                  <option selected>8</option>
                  <option selected>9</option>
                  <option selected>10</option>
                </select>
              </span>
              <span class="icon is-small is-left">
                <i class="fas fa-dollar-sign"></i>
              </span>
            </p>
          </div>
        </div>
      </div>
    </div>
    <div
      class="field mt-3 text-center"
      *ngIf="createCarPrice.get('BasePriceDistance')?.invalid && (createCarPrice.get('BasePriceDistance')?.dirty || createCarPrice.get('BasePriceDistance')?.touched)"
    >
      <span
        *ngIf="createCarPrice.get('BasePriceDistance')?.hasError('required')"
        style="color: red;"
        >Please Select BasePriceDistance...</span
      >
      <!-- <span *ngIf="createcity.get('cityname')?.hasError('incorrect')">CarType is already exists</span> -->
    </div>
    <div class="center">
      <div class="field is-horizontal">
        <div class="field-label is-normal">
          <label class="label">Base Price <span
            tooltip="The base price is a predetermined amount that a rider is charged as soon as the ride starts. This is a fixed
            amount that is set by admin and varies by city and location"
            style="background-color: black; border-radius: 10px;"
          >
            <i
              class="fas fa-info my-1 mx-1"
              style="color: white; font-size: 10px;"
            ></i></span
        ></label>
        </div>
        <div class="field-body">
          <div class="field">
            <p class="control is-expanded has-icons-left has-icons-right">
              <input
                class="input is-success no-spin"
                type="tel"
                placeholder="Base Price"
                formControlName="BasePrice"
                oninput="this.value = this.value.replace(/[^0-9]/g, '');"
                maxlength="3"
              />
              <span class="icon is-small is-left">
                <i class="fas fa-wallet"></i>
              </span>
              <span class="icon is-small is-right">
                <i class="fas fa-dollar-sign"></i>
              </span>
            </p>
          </div>
        </div>
      </div>
    </div>
    <div
      class="field mt-3 text-center"
      *ngIf="createCarPrice.get('BasePrice')?.invalid && (createCarPrice.get('BasePrice')?.dirty || createCarPrice.get('BasePrice')?.touched)"
    >
      <span
        *ngIf="createCarPrice.get('BasePrice')?.hasError('required')"
        style="color: red;"
        >Please Select BasePrice...</span
      >
      <!-- <span *ngIf="createcity.get('cityname')?.hasError('incorrect')">CarType is already exists</span> -->
    </div>
    <div class="center">
      <div class="field is-horizontal">
        <div class="field-label is-normal">
          <label class="label">Price Per Unit Distance <span
            tooltip="The unit distance price is the amount that a rider is charged for each mile or kilometer traveled after
            base price distance."
            style="background-color: black; border-radius: 10px;"
          >
            <i
              class="fas fa-info my-1 mx-1"
              style="color: white; font-size: 10px;"
            ></i></span
        ></label>
        </div>
        <div class="field-body">
          <div class="field">
            <p class="control is-expanded has-icons-left has-icons-right">
              <input
                class="input is-success no-spin"
                type="tel"
                placeholder="Price Per Unit Distance"
                formControlName="DistancePrice"
                oninput="this.value = this.value.replace(/[^0-9]/g, '');"
                maxlength="3"
              />
              <span class="icon is-small is-left">
                <i class="fas fa-arrow-right-arrow-left"></i>
              </span>
              <span class="icon is-small is-right">
                <i class="fas fa-dollar-sign"></i>
              </span>
            </p>
          </div>
        </div>
      </div>
    </div>
    <div
      class="field mt-3 text-center"
      *ngIf="createCarPrice.get('DistancePrice')?.invalid && (createCarPrice.get('DistancePrice')?.dirty || createCarPrice.get('DistancePrice')?.touched)"
    >
      <span
        *ngIf="createCarPrice.get('DistancePrice')?.hasError('required')"
        style="color: red;"
        >Please Select DistancePrice...</span
      >
      <!-- <span *ngIf="createcity.get('cityname')?.hasError('incorrect')">CarType is already exists</span> -->
    </div>
    <div class="center">
      <div class="field is-horizontal">
        <div class="field-label is-normal">
          <label class="label">Price Per Unit Time(min) <span
            tooltip="The unit time price is the amount that a rider is charged for each minute that they spend in the vehicle
            during a ride."
            style="background-color: black; border-radius: 10px;"
          >
            <i
              class="fas fa-info my-1 mx-1"
              style="color: white; font-size: 10px;"
            ></i></span
        ></label>
        </div>
        <div class="field-body">
          <div class="field">
            <p class="control is-expanded has-icons-left has-icons-right">
              <input
                class="input is-success no-spin"
                type="tel"
                placeholder="Price Per Unit Time(min)"
                formControlName="TimePrice"
                oninput="this.value = this.value.replace(/[^0-9]/g, '');"
                maxlength="3"
              />
              <span class="icon is-small is-left">
                <i class="fas fa-hourglass"></i>
              </span>
              <span class="icon is-small is-right">
                <i class="fas fa-dollar-sign"></i>
              </span>
            </p>
          </div>
        </div>
      </div>
    </div>
    <div
      class="field mt-3 text-center"
      *ngIf="createCarPrice.get('TimePrice')?.invalid && (createCarPrice.get('TimePrice')?.dirty || createCarPrice.get('TimePrice')?.touched)"
    >
      <span
        *ngIf="createCarPrice.get('BasePrice')?.hasError('required')"
        style="color: red;"
        >Please Select TimePrice...</span
      >
      <!-- <span *ngIf="createcity.get('cityname')?.hasError('incorrect')">CarType is already exists</span> -->
    </div>
    <div class="center">
      <div class="field is-horizontal">
        <div class="field-label is-normal">
          <label class="label">Max Space</label>
        </div>
        <div class="field-body">
          <div class="field">
            <p class="control is-expanded has-icons-left has-icons-right">
              <input
                class="input is-success no-spin"
                type="tel"
                placeholder="Max Space"
                formControlName="MaxSpace"
                oninput="this.value = this.value.replace(/[^0-9]/g, '');"
                maxlength="2"
              />
              <span class="icon is-small is-left">
                <i class="fas fa-user-group"></i>
              </span>
              <span class="icon is-small is-right">
                <i class="fas fa-check"></i>
              </span>
            </p>
          </div>
        </div>
      </div>
    </div>
    <div
      class="field mt-3 text-center"
      *ngIf="createCarPrice.get('MaxSpace')?.invalid && (createCarPrice.get('MaxSpace')?.dirty || createCarPrice.get('MaxSpace')?.touched)"
    >
      <span
        *ngIf="createCarPrice.get('MaxSpace')?.hasError('required')"
        style="color: red;"
        >Please Select MaxSpace...</span
      >
      <!-- <span *ngIf="createcity.get('cityname')?.hasError('incorrect')">CarType is already exists</span> -->
    </div>
    <div class="stg">
      <button
        type="button"
        class="btn btn-success"
        (click)="AddCarPrice(this.createCarPrice.value)"
        *ngIf="add"
      >
        Add
      </button>
      <button
        type="button"
        class="btn btn-success"
        (click)="UpdateCarPrice(this.createCarPrice.value)"
        *ngIf="edit"
        id="{{this.id}}"
      >
        Update
      </button>
      <button type="reset" class="btn btn-danger" (click)="Cancel()">
        Cancel
      </button>
    </div>
  </form>
</div>

<div class="container-fluid" style="margin-bottom: 100px;">
  <div class="table-responsive">
    <div class="table-wrapper">
      <div class="table-title">
        <div class="row">
          <div class="col-sm-11 col-md-11 col-lg-11 col-xl-11 col-xxl-11">
            <h2>
              <i class="fa fa-solid fa-money mx-2" style="color: #2199e8;"></i
              >Vehicle Pricing <b>Details</b>
            </h2>
          </div>

          <div
            class="col-sm-1 col-md-1 col-lg-1 col-xl-1 col-xxl-1 text-center"
          >
            <select
              name="sort"
              id="sort"
              (change)="sorting($event.target)"
              class="btn m-2 p-1 py-1 my-3 mx-2"
              style="
                box-shadow: lightblue 0px 1px 4px;
                padding: 0;
                margin: 0;
                width: 50px;
              "
            >
              <option value="asc">asc</option>
              <option value="dasc">dcs</option>
            </select>
          </div>
        </div>
      </div>

      <table class="table table-striped table-hover table-bordered">
        <thead>
          <tr>
            <th class="text-center">Country</th>
            <th class="text-center">City</th>
            <th class="text-center">Type</th>
            <th class="text-center">DriverProfit</th>
            <th class="text-center">MinFarePrice</th>
            <th class="text-center">BasePriceDistance</th>
            <th class="text-center">BasePrice</th>
            <th class="text-center">DistancePrice</th>
            <th class="text-center">TimePrice</th>
            <th class="text-center">MaxSpace</th>
            <th class="text-center">Action</th>
          </tr>
        </thead>
        <tbody>
          <tr
            *ngFor="let pricelist of carpricelist | paginate: {
        itemsPerPage: tableSize,
        currentPage: page,
        totalItems: count
      };
let i = index"
            class="text-center stg2"
          >
            <td>{{pricelist.countryid.countryname | titlecase}}</td>
            <td>{{pricelist.cityid.cityname | titlecase}}</td>
            <td>{{pricelist.typeid.cartype | uppercase}}</td>
            <td>{{pricelist.DriverProfit}}</td>
            <td>{{pricelist.MinFarePrice}}</td>
            <td>{{pricelist.BasePriceDistance}}</td>
            <td>{{pricelist.BasePrice}}</td>
            <td>{{pricelist.DistancePrice}}</td>
            <td>{{pricelist.TimePrice}}</td>
            <td>{{pricelist.MaxSpace}}</td>
            <td>
              <button
                type="button"
                class="btn bg-light p-1 px-3"
                style="box-shadow: lightblue 0px 1px 4px;"
                id="{{pricelist._id}}"
                (click)="EditCarPrice(pricelist)"
              >
                <i
                  class="fa fa-pencil"
                  style="color: black; padding: 0; margin: 0; font-size: 12px;"
                ></i>
              </button>

              <button
                type="button"
                class="btn bg-light p-1 px-3 my-2"
                style="box-shadow: lightblue 0px 1px 4px;"
                id="{{pricelist._id}}"
                (click)="DeleteCarPrice(pricelist)"
              >
                <i
                  class="fa fa-trash"
                  style="color: black; padding: 0; margin: 0; font-size: 12px;"
                ></i>
              </button>
            </td>
          </tr>
        </tbody>
      </table>
      <div class="clearfix p-1">
        <div class="hint-text m-1" style="font-size: 18px;">
          Showing
          <b>
            <select
              name="sort"
              id="sort"
              class="bg-light mx-1 px-1 my-1"
              style="
                outline: 0;
                border: 0;
                box-shadow: lightblue 0px 1px 4px;
                width: 40px;
              "
              (change)="onTableSizeChange($event)"
              (change)="onTableDataChange($event)"
            >
              <option value="2" selected>2</option>
              <option value="4">4</option>
              <option value="6">6</option>
              <option value="8">8</option>
            </select></b
          >
          out of <b>{{count}}</b> entries
        </div>
        <div class="d-flex justify-content-end mb-5">
          <pagination-controls
            previousLabel="Prev"
            nextLabel="Next"
            (pageChange)="onTableDataChange($event)"
          >
          </pagination-controls>
        </div>
      </div>
    </div>
  </div>
</div>

<div *ngIf="nouser">
  <p class="text-center">
    No User Found
  </p>
</div>
