<div class="d-flex">
  <div class="field col-4 card p-3 m-3 box" *ngIf="user">
    <form [formGroup]="createUserRide">
      <label class="label">Number</label>
      <div class="input-group">
        <select
          name="countrycode"
          class="bg-light text-center"
          formControlName="countrycode"
          [(ngModel)]="selectedCountryCode"
        >
          <option
            *ngFor="let country of countrycodelist"
            [value]="country.countrycode"
            class="bg-light"

          >
            {{country.countrycode}}</option
          >
        </select>
        <input
          formControlName="number"
          type="tel"
          class="form-control no-spin"
          aria-label="Text input with dropdown button"
          onkeypress="return /[0-9]/i.test(event.key)"
          maxlength="10"
        />
      </div>

      <div
        class="field"
        *ngIf="createUserRide.get('countrycode')?.invalid && createUserRide.get('countrycode')?.touched "
      >
        <span
          *ngIf="createUserRide.get('countrycode')?.hasError('required')"
          style="color: red;"
          >Select Country Code</span
        >
      </div>
      <div
        class="field"
        *ngIf="createUserRide.get('number')?.invalid && (createUserRide.get('number')?.dirty || createUserRide.get('number')?.touched) "
      >
        <span
          *ngIf="createUserRide.get('number')?.hasError('required')"
          style="color: red;"
          >Number is required</span
        >
        <span
          *ngIf="createUserRide.get('number')?.hasError('pattern')"
          style="color: red;"
          >It's length is 10</span
        >
      </div>
    </form>
    <div class="d-flex justify-content-center">
      <button
        class="btn btn-success m-2"
        (click)="GetDetails(createUserRide.value)"
        *ngIf="gotDetails"
      >
        <i class="fa-solid fa-user-plus" style="font-size: 16px;"></i>
      </button>
      <button
        class="btn btn-danger m-2"
        (click)="resetuser()"
        *ngIf="gotDetails"
      >
        <i class="fa-solid fa-refresh" style="font-size: 16px;"></i>
      </button>
    </div>

    <div *ngIf="nouser" style="color: red; text-align: center;">
      This Input Is Wrong.....
    </div>

    <div *ngIf="userdetails" class="my-4">
      <form [formGroup]="CreateUserDetails">
        <div class="field">
          <p class="control has-icons-left has-icons-right">
            <input
              class="input box"
              type="text"
              formControlName="name"
              placeholder="name"
              readonly
            />
            <span class="icon is-small is-left">
              <i class="far fa-user text-info"></i>
            </span>
          </p>
        </div>
        <div class="field">
          <p class="control has-icons-left">
            <input
              class="input box"
              type="text"
              formControlName="email"
              placeholder="email"
              readonly
            />
            <span class="icon is-small is-left">
              <i class="fas fa-envelope text-success"></i>
            </span>
          </p>
        </div>
        <div class="field">
          <p class="control has-icons-left">
            <input
              class="input box"
              type="text"
              formControlName="number"
              placeholder="number"
              readonly
            />
            <span class="icon is-small is-left">
              <i class="fas fa-phone text-success"></i>
            </span>
          </p>
        </div>
        <div class="d-flex justify-content-center">
          <!-- <button
            type="submit"
            class="btn btn-success text-center"
            (click)="FindDetails(createUserRide.value)"
          >
            Next
          </button> -->
          <button
            class="btn btn-danger mx-2"
            (click)="resetuser()"
          >
          <i class="fa-solid fa-arrow-left"></i>
          </button>
          <button
          type="submit"
            class="btn btn-success mx-2"
            (click)="FindDetails(createUserRide.value)"
          >
          <i class="fa-solid fa-arrow-right"></i>
          </button>

        </div>
      </form>
    </div>
  </div>
  <div class="field col-4 card p-3 m-3 box" *ngIf="distancemap">
    <form [formGroup]="createDistance">
      <div class="field">
        <label class="label">Starting Point:</label>
        <p class="control has-icons-left has-icons-right">
          <input
            id="search-bar"
            class="input box"
            type="text"
            formControlName="startingpoint"
            (input)="startingpoint()"
            (change)="cityonrock()"
          />
          <button
            class="close-icon"
            type="reset"
            (click)="cancelcity()"
          ></button>
          <span class="icon is-small is-left">
            <i class="far fa-flag text-info"></i>
          </span>
        </p>
      </div>
      <span
        class="field text-center"
        *ngIf="createDistance.get('startingpoint')?.invalid && (createDistance.get('startingpoint')?.dirty || createDistance.get('startingpoint')?.touched)"
      >
        <span
          *ngIf="createDistance.get('startingpoint')?.hasError('required')"
          style="color: red;"
          >Please Select Starting Point...</span
        >
      </span>
      <div class="field">
        <label class="label">Drop Point:</label>
        <p class="control has-icons-left has-icons-right">
          <input
            id="search-bar-to"
            class="input box"
            type="text"
            formControlName="droppoint"
            (input)="droppoint()"
          />
          <span class="icon is-small is-left">
            <i class="far fa-flag text-info"></i>
          </span>
        </p>
      </div>
      <span
        class="field text-center"
        *ngIf="createDistance.get('droppoint')?.invalid && (createDistance.get('droppoint')?.dirty || createDistance.get('droppoint')?.touched)"
      >
        <span
          *ngIf="createDistance.get('droppoint')?.hasError('required')"
          style="color: red;"
          >Please Select Droping Point...</span
        >
      </span>
      <div formArrayName="waypoints">
        <div *ngFor="let item of waypoints.controls; let i = index">
          <div class="field">
            <label class="label">Way Point:</label>
            <p class="control has-icons-left has-icons-right">
              <input
                class="input box"
                type="text"
                id="waypoint{{i+1}}"
                (input)="waypoint($event.target)"
                [formControlName]="i"
                placeholder="Way Point{{i + 1}}"
              />
              <span class="icon is-small is-left">
                <i class="far fa-flag text-info"></i>
              </span>
            </p>
          </div>
        </div>
      </div>

      <div class="d-flex justify-content-end">
        <button
          type="button"
          class="btn btn-primary text-light text-center my-2"
          (click)="addItem()"
          [disabled]="!readyforride"
        >
        <i class="fa-solid fa-plus my-1" style="font-size: 18px"></i>
        <i class="fa-solid fa-location-dot my-1" style="font-size: 18px"></i>`
        </button>
      </div>

      <div class="d-flex justify-content-center my-2">
        <button
        type="button"
        class="btn btn-danger text-center mx-2"
        (click)="resetdistance()"
      >
        <i class="fa-solid fa-arrow-left" style="font-size: 18px"></i>
      </button>
        <button
          type="button"
          class="btn btn-success text-center mx-2"
          (click)="CalculateDistance(createDistance.value)"

        >
          <i class="fa-solid fa-directions" style="font-size: 18px"></i>
        </button>
      </div>
    </form>
  </div>
  <!-- </form> -->
  <div class="field col-4 card p-3 m-3 box mb-5" *ngIf="rideready">
    <form [formGroup]="createride">
      <div class="field">
        <label class="label">Total Time:</label>
        <p class="control has-icons-left has-icons-right">
          <input
            class="input box"
            type="text"
            formControlName="totalTime"
            placeholder="Total Time"
            readonly
          />
          <span class="icon is-small is-left">
            <i class="far fa-clock text-info"></i>
          </span>
        </p>
      </div>
      <div class="field">
        <label class="label">Total Distance:</label>
        <p class="control has-icons-left has-icons-right">
          <input
            class="input box"
            type="text"
            formControlName="totalDistance"
            placeholder="Total Distance"
            readonly
          />
          <span class="icon is-small is-left">
            <i class="fas fa-location-dot"></i>
          </span>
        </p>
      </div>
      <div class="field" *ngIf="estimate">
        <label class="label">Estimated Price :</label>
        <div *ngFor="let item of estimatedfare">
          <label class="label">{{item.type}}:</label>
          <p>â‚¹{{item.estimatefare}}</p>
        </div>
      </div>
      <div class="field mx-auto">
        <label class="label">Service Type:</label>
        <p class="control has-icons-left">
          <span class="select">
            <select
              formControlName="serviceType"
              (change)="selectVehicle($event)"
            >
              <option
                *ngFor="let car of carTypeList"
                [value]="car.type"
                class="bg-light"
                [attr.type-id]="car.id"
              >
                {{car.type | uppercase}}</option
              >
            </select>
          </span>
          <span class="icon is-small is-left">
            <i class="fas fa-car"></i>
          </span>
        </p>
      </div>
      <div
        class="field mt-3 text-center"
        *ngIf="createride.get('serviceType')?.invalid && (createride.get('serviceType')?.dirty || createride.get('serviceType')?.touched)"
      >
        <span
          *ngIf="createride.get('serviceType')?.hasError('required')"
          style="color: red;"
          >Please Select Vehicle Type...</span
        >
        <!-- <span *ngIf="createcity.get('cityname')?.hasError('incorrect')">CarType is already exists</span> -->
      </div>

      <div class="field">
        <label class="label">Payment Method:</label>
        <p class="control has-icons-left">
          <span class="select">
            <select formControlName="paymentOption" style="width: 150px;" (change)="checkcard($event.target)">
              <option class="bg-light" selected disabled
                >Select Payment Option</option
              >
              <option class="bg-light">Cash</option>
              <option class="bg-light">Card</option>
            </select>
          </span>
          <span class="icon is-small is-left">
            <i class="fas fa-dollar-sign"></i>
          </span>
        </p>
      </div>
      <div
        class="field mt-3 text-center"
        *ngIf="createride.get('paymentOption')?.invalid && (createride.get('paymentOption')?.dirty || createride.get('paymentOption')?.touched)"
      >
        <span
          *ngIf="createride.get('paymentOption')?.hasError('required')"
          style="color: red;"
          >Please Select Payment Type...</span
        >
        <!-- <span *ngIf="createcity.get('cityname')?.hasError('incorrect')">CarType is already exists</span> -->
      </div>
      <div class="field">
        <label class="label">Schedule Ride:</label>
        <p class="control has-icons-left">
          <span class="select" (change)="time($event.target)">
            <select style="width: 150px;">
              <option class="bg-light" selected disabled>Select Time</option>
              <option class="bg-light">Now</option>
              <option class="bg-light">Custom</option>
            </select>
          </span>
          <span class="icon is-small is-left">
            <i class="fas fa-clock"></i>
          </span>
        </p>
      </div>
      <div class="field" *ngIf="timevalue != true">
        <label class="label">Date and Time:</label>
        <div class="datetimepicker" >
          <input
            type="date"
            id="date"
            value="2018-07-03"
            formControlName="rideDate"
            (input)="datechecker($event.target)"
          />
          <span></span>
          <input
            type="time"
            id="time"
            value="08:00"
            formControlName="rideTime"

          />
        </div>
      </div>
      <div
        class="field mt-3 text-center"
        *ngIf="createride.get('rideDate')?.invalid && (createride.get('rideDate')?.dirty || createride.get('rideDate')?.touched)"
      >
        <span
          *ngIf="createride.get('rideDate')?.hasError('required')"
          style="color: red;"
          >Please Select Date...</span
        >
        <!-- <span *ngIf="createcity.get('cityname')?.hasError('incorrect')">CarType is already exists</span> -->
      </div>
      <div
        class="field mt-3 text-center"
        *ngIf="createride.get('rideTime')?.invalid && (createride.get('rideTime')?.dirty || createride.get('rideTime')?.touched)"
      >
        <span
          *ngIf="createride.get('rideTime')?.hasError('required')"
          style="color: red;"
          >Please Select Time...</span
        >
        <!-- <span *ngIf="createcity.get('cityname')?.hasError('incorrect')">CarType is already exists</span> -->
      </div>

      <div class="d-flex justify-content-center my-2">
        <button
        class="btn btn-danger mx-2"
        (click)="cancelride()"
      >
      <i class="fa-solid fa-arrow-left"></i>
      </button>
        <button
          type="button"
          class="btn btn-success text-center"
          (click)="BookRide(createride.value)"
        >
          Book Ride
        </button>
      </div>
    </form>
  </div>

  <div id="map" class="col-8 mx-auto" style="height: 400px;"></div>
</div>
